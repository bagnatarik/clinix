<nav
  class="h-[65px] w-full border-b border-neutral-300 bg-white flex items-center justify-between p-5 fixed top-0 z-50"
>
  <div class="flex gap-x-2 items-center">
    <button class="size-5 flex items-center justify-center hover:cursor-pointer">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="lucide lucide-menu-icon lucide-menu size-4"
      >
        <path d="M4 5h16" />
        <path d="M4 12h16" />
        <path d="M4 19h16" />
      </svg>
    </button>
    <a
      [routerLink]="['/dashboard/home']"
      class="text-lg font-semibold flex items-center space-x-1.5 cursor-pointer group"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="lucide lucide-activity-icon lucide-activity size-3.5 stroke-blue-600"
      >
        <path
          d="M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"
        />
      </svg>
      <span class="group-hover:text-blue-600 transition-colors duration-300">Clinix</span>
    </a>
  </div>

  <div class="relative">
    <button
      #profileTrigger
      class="flex items-center gap-x-3 px-2 py-1 rounded hover:bg-neutral-100 transition-colors hover:cursor-pointer"
      (click)="toggleDropdown()"
      aria-haspopup="true"
      [attr.aria-expanded]="dropdownOpen"
      title="Profil"
    >
      <div
        class="size-10 rounded-full bg-neutral-200 flex items-center justify-center text-xs text-neutral-700"
      >
        {{ (userName || 'Utilisateur').charAt(0) }}
      </div>
      <div class="flex flex-col text-left">
        <span class="text-sm font-medium text-neutral-800">{{ userName || 'Utilisateur' }}</span>
        <span class="text-xs text-neutral-500">{{ userEmail || '' }}</span>
      </div>
    </button>

    @if (dropdownOpen) {
    <div
      #profileMenu
      class="absolute right-0 top-13 w-70 bg-white border border-neutral-300 rounded p-3 space-y-3 z-50"
    >
      <div class="flex items-center gap-x-2">
        <div
          class="size-8 rounded-full bg-neutral-200 flex items-center justify-center text-xs text-neutral-700"
        >
          {{ (userName || 'Utilisateur').charAt(0) }}
        </div>
        <div class="flex flex-col gap-y-0.5">
          <span class="text-sm font-medium text-neutral-800">{{ userName || 'Utilisateur' }}</span>
          <span class="text-xs text-neutral-500">{{ userEmail || '' }}</span>
          <span class="text-xs text-neutral-500">{{ getRoleFrench(userRole) || '' }}</span>
        </div>
      </div>

      <!-- <div class="border-t border-neutral-200"></div>

      <div class="flex flex-col gap-1">
        <a
          class="text-sm text-neutral-700 hover:text-blue-600 cursor-pointer hover:bg-gray-100 transition-colors duration-300 py-3 px-2"
          (click)="goToProfile()"
        >
          Voir mon profil
        </a>
        <a
          class="text-sm text-neutral-700 hover:text-blue-600 cursor-pointer hover:bg-gray-100 transition-colors duration-300 py-3 px-2"
          (click)="toggleDropdown()"
        >
          Paramètres
        </a>
      </div> -->

      <div class="border-t border-neutral-200"></div>
      <button
        class="w-full px-3 py-2 text-sm border rounded hover:cursor-pointer border-red-500 bg-red-500 hover:bg-red-600 text-white transition-colors"
        (click)="logout()"
      >
        Se déconnecter
      </button>
    </div>
    }
  </div>
</nav>
